---
apiVersion: v1
kind: Pod
metadata:
  labels:
    run: binlogik
  name: binlogik
spec:
  hostNetwork: true
  containers:
  - args:
    - "bundle"
    - "exec"
    - "binlogik"
    - "--follow"
    stdin: false
    stdinOnce: false
    tty: false
    image: binlogik:latest
    imagePullPolicy: IfNotPresent
    name: follow
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /home/app/tmp
      name: tmpdir
    resources:
      limits:
        memory: 5G
  - args:
    - "bundle"
    - "exec"
    - "binlogik"
    - "--workload"
    stdin: false
    stdinOnce: false
    tty: false
    image: binlogik:latest
    imagePullPolicy: IfNotPresent
    name: workload
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /home/app/tmp
      name: tmpdir
  - args:
    - bundle
    - exec
    - rackup
    - config.ru
    stdin: false
    stdinOnce: false
    tty: false
    image: binlogik:latest
    imagePullPolicy: IfNotPresent
    ports:
    - containerPort: 9292
      name: metrics
      hostPort: 9292
    livenessProbe:
      exec:
        command:
        - "/bin/true"
      initialDelaySeconds: 1
      periodSeconds: 10
      timeoutSeconds: 5
      successThreshold: 1
      failureThreshold: 3
    readinessProbe:
      exec:
        command:
        - "/bin/true"
      initialDelaySeconds: 1
      periodSeconds: 10
      timeoutSeconds: 1
      successThreshold: 1
      failureThreshold: 3
    name: metrics
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /home/app/tmp
      name: tmpdir
  restartPolicy: Never
  securityContext: {}
  terminationGracePeriodSeconds: 1
  volumes:
  - name: tmpdir
    emptyDir: {}
